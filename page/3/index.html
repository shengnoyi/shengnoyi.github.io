<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Volibear.V</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Volibear.V">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Volibear.V">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Volibear.V">
  
    <link rel="alternate" href="/atom.xml" title="Volibear.V" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Volibear.V</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-functional-javascript" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/10/functional-javascript/" class="article-date">
  <time datetime="2017-03-10T08:18:40.000Z" itemprop="datePublished">2017-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/10/functional-javascript/">functional javascript</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="函数式编程，我觉得是比较难以理解的一个练习，可能之后需要反复看。"><a href="#函数式编程，我觉得是比较难以理解的一个练习，可能之后需要反复看。" class="headerlink" title="函数式编程，我觉得是比较难以理解的一个练习，可能之后需要反复看。"></a>函数式编程，我觉得是比较难以理解的一个练习，可能之后需要反复看。</h5><p>参考资料：<br><code>npm install -g functional-javascript</code><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_blank" rel="noopener">MDN: Array.prototyp.reduce</a><br><a href="http://blog.richdougherty.com/2009/04/tail-calls-tailrec-and-trampolines.html" target="_blank" rel="noopener">Tail calls, @tailrec and trampolines</a></p>
<h3 id="exercise-6-reduce"><a href="#exercise-6-reduce" class="headerlink" title="exercise 6:reduce"></a>exercise 6:reduce</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> countWords(arr) &#123;</span><br><span class="line">  <span class="built_in">return</span> arr.reduce(<span class="keyword">function</span>(countMap, word) &#123;</span><br><span class="line">    countMap[word] = ++countMap[word] || 1 // increment or initialize to 1</span><br><span class="line">    <span class="built_in">return</span> countMap</span><br><span class="line">  &#125;, &#123;&#125;) // second argument to reduce initialises countMap to &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = countWords</span><br></pre></td></tr></table></figure>
<h3 id="exercise-7-recrusion"><a href="#exercise-7-recrusion" class="headerlink" title="exercise 7:recrusion"></a>exercise 7:recrusion</h3><p>使用递归实现一个类似reduce的函数:reduce(arr,fn,initial)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> reduce(arr, fn, initial) &#123;</span><br><span class="line">  <span class="built_in">return</span> (<span class="keyword">function</span> reduceOne(index, value) &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &gt; arr.length - 1) <span class="built_in">return</span> value // end condition</span><br><span class="line">    <span class="built_in">return</span> reduceOne(index + 1, fn(value, arr[index], index, arr)) // calculate &amp; pass values to next step</span><br><span class="line">  &#125;)(0, initial) // IIFE. kick off recursion with initial values</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = reduce</span><br></pre></td></tr></table></figure>
<p>这道感觉有点难，没有做出来，再斟酌一下吧</p>
<h3 id="exercise-9-partial-application-without-bind"><a href="#exercise-9-partial-application-without-bind" class="headerlink" title="exercise 9:partial application without bind"></a>exercise 9:partial application without bind</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var slice = Array.prototype.slice</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> logger(namespace) &#123;</span><br><span class="line">  <span class="built_in">return</span> <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    console.log.apply(console, [namespace].concat(slice.call(arguments)))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = logger</span><br></pre></td></tr></table></figure>
<p>考究call 和 apply的使用，console对象有点意思。</p>
<h3 id="exercise-10：artial-application-with-bind"><a href="#exercise-10：artial-application-with-bind" class="headerlink" title="exercise 10：artial application with bind"></a>exercise 10：artial application with bind</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module.exports = <span class="keyword">function</span>(namespace) &#123;</span><br><span class="line">  <span class="built_in">return</span> console.log.bind(console, namespace)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>bind函数用法<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="noopener">MDN:Function.prototype.bind</a></p>
<h3 id="exercise-13-Blocking-Event-Loop"><a href="#exercise-13-Blocking-Event-Loop" class="headerlink" title="exercise 13:Blocking Event Loop"></a>exercise 13:Blocking Event Loop</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> repeat(operation, num) &#123;</span><br><span class="line">  <span class="keyword">if</span> (num &lt;= 0) <span class="built_in">return</span></span><br><span class="line"></span><br><span class="line">  operation()</span><br><span class="line"></span><br><span class="line">  // release control every 10 or so</span><br><span class="line">  // iterations.</span><br><span class="line">  // 10 is arbitrary.</span><br><span class="line">  <span class="keyword">if</span> (num % 10 === 0) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">      repeat(operation, --num)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    repeat(operation, --num)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = repeat</span><br></pre></td></tr></table></figure>
<p>使用setTimeout交出程序控制权，插入事件队列中</p>
<h3 id="exercise-14-tranpoline"><a href="#exercise-14-tranpoline" class="headerlink" title="exercise 14:tranpoline"></a>exercise 14:tranpoline</h3><p>越来越看不懂了,使用tranpoline的优点似乎是不会爆栈<br>可以看看这篇：<a href="http://blog.richdougherty.com/2009/04/tail-calls-tailrec-and-trampolines.html" target="_blank" rel="noopener">Tail calls, @tailrec and trampolines</a><br>题目：<br>The boilerplate includes a definition of repeat. repeat will take a Function ope<br>ration, and a Number num, and invoke operation num times:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var count = 0</span><br><span class="line">repeat(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">  count++</span><br><span class="line">&#125;, 100)</span><br><span class="line"></span><br><span class="line">console.log(<span class="string">'executed %d times.'</span>, count)</span><br><span class="line">// =&gt; executed 100 <span class="built_in">times</span>.</span><br></pre></td></tr></table></figure></p>
<p>BUT note that executing repeat with a large num causes a stack overflow:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var count = 0</span><br><span class="line">repeat(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">  count++</span><br><span class="line">&#125;, 100000)</span><br><span class="line"></span><br><span class="line">console.log(<span class="string">'executed %d times'</span>, count)</span><br><span class="line">// =&gt; RangeError: Maximum call stack size exceeded</span><br></pre></td></tr></table></figure></p>
<h4 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h4><p>Modify the boilerplate below such that it uses a trampoline to continuously call<br> itself synchronously.</p>
<p>You can assume that the operation passed to repeat does not take arguments (or t<br>hey are already bound to the function) and the return value is not important.</p>
<h6 id="Conditions"><a href="#Conditions" class="headerlink" title="Conditions"></a>Conditions</h6><ul>
<li>Do not change the implementation of repeat to include any loops(you may chan<br>ge it in other ways though).</li>
</ul>
<h5 id="Hints"><a href="#Hints" class="headerlink" title="Hints"></a>Hints</h5><ul>
<li>Modify <code>repeat</code> so it returns the ‘next step’, if there is one.</li>
<li>A trampoline continues to synchronously execute steps, getting new steps, un<br>til there are no more steps. You can use a loop here!</li>
<li>If your program takes a long time to run, something is probably wrong.  Use<br>Control - C to kill the node process.</li>
</ul>
<h5 id="Boilerplate"><a href="#Boilerplate" class="headerlink" title="Boilerplate"></a>Boilerplate</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> repeat(operation, num) &#123;</span><br><span class="line">  // Modify this so it doesn<span class="string">'t cause a stack overflow!</span></span><br><span class="line"><span class="string">  if (num &lt;= 0) return</span></span><br><span class="line"><span class="string">  operation()</span></span><br><span class="line"><span class="string">  return repeat(operation, --num)</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function trampoline(fn) &#123;</span></span><br><span class="line"><span class="string">  // You probably want to implement a trampoline!</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">module.exports = function(operation, num) &#123;</span></span><br><span class="line"><span class="string">  // You probably want to call your trampoline here!</span></span><br><span class="line"><span class="string">  return repeat(operation, num)</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<p>答案：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> repeat(operation, num) &#123;</span><br><span class="line">  <span class="built_in">return</span> <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> (num &lt;= 0) <span class="built_in">return</span></span><br><span class="line">    operation()</span><br><span class="line">    <span class="built_in">return</span> repeat(operation, --num)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> trampoline(fn) &#123;</span><br><span class="line">  <span class="keyword">while</span>(fn &amp;&amp; typeof fn === <span class="string">'function'</span>) &#123;</span><br><span class="line">    fn = fn()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = <span class="keyword">function</span>(operation, num) &#123;</span><br><span class="line">  trampoline(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> repeat(operation, num)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>(太困难了，感觉目前很难运用，先到这里吧，待填坑…)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/10/functional-javascript/" data-id="cjoo060rr000ic7rs5ebei4d4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-planetProto" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/09/planetProto/" class="article-date">
  <time datetime="2017-03-09T07:30:38.000Z" itemprop="datePublished">2017-03-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/09/planetProto/">Understanding Javascript prototypes</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考资料：<br>安装node.js,npm后在命令行执行   <code>npm install -g planetproto</code>  </p>
<h2 id="exercise-2"><a href="#exercise-2" class="headerlink" title="exercise 2"></a>exercise 2</h2><p>使用<code>__proto__</code>可以在JavaScript中实现继承，不过不能用于生产环境，因为不是标准的一部分，只有部分浏览器有实现，不过作为概念理解来用还是可以的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var machine=&#123;</span><br><span class="line">	motors:4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var robot=&#123;</span><br><span class="line">	friendly:<span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">var robby=&#123;&#125;</span><br><span class="line"></span><br><span class="line">robot.__proto__=machine;</span><br><span class="line"></span><br><span class="line">robby.__proto__=robot;</span><br><span class="line"></span><br><span class="line">// -&gt; What is `robby.motors`?</span><br><span class="line">claim(robby.motors, 4);</span><br><span class="line"></span><br><span class="line">// -&gt; What is `robby.friendly`?</span><br><span class="line">claim(robby.friendly, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<h2 id="exercise-5"><a href="#exercise-5" class="headerlink" title="exercise 5"></a>exercise 5</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var machine=&#123;</span><br><span class="line">	parts:[],</span><br><span class="line">	capabilities:&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">var robot=&#123;&#125;;</span><br><span class="line">var vehicle=&#123;&#125;;</span><br><span class="line"></span><br><span class="line">robot.__proto__ = machine;</span><br><span class="line">vehicle.__proto__ = machine;</span><br></pre></td></tr></table></figure>
<p>如果原型对象的字段是基本类型，比如有字段<code>machine.kind</code>，由于JavaScript属性访问的规则<br>（1.在自有属性中找值 ；2.在步骤1中找不到，则开始找它的原型中的属性；3.重复步骤2直至找到或者到达原型链终点也找不到，则返回<code>undefined</code>），<br>此时可以调用<code>robot.kind</code>可以获得<code>machine.kind</code>的值，如果对<code>robot.kind</code>赋值，那么JavaScript会在robot对象上增加一个新的<code>kind</code>作为自有属性,覆盖了继承属性（这种覆盖称为shadow），不会影响到原型对象。<br>如果原型对象的字段不是基本类型，此时不会有shadow,那么修改继承对象也将会修改到原型对象</p>
<h3 id="exercise-6-Object-Create"><a href="#exercise-6-Object-Create" class="headerlink" title="exercise 6 (Object Create)"></a>exercise 6 (Object Create)</h3><p>可以使用es5的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="noopener">Object.create()</a>代替<code>__proto__</code></p>
<h5 id="可以用下列方法判断原型对象是什么："><a href="#可以用下列方法判断原型对象是什么：" class="headerlink" title="可以用下列方法判断原型对象是什么："></a>可以用下列方法判断原型对象是什么：</h5><ul>
<li>Object.getPrototypeOf</li>
<li>Object.isPrototypeOf</li>
</ul>
<h2 id="exercise-8"><a href="#exercise-8" class="headerlink" title="exercise 8"></a>exercise 8</h2><ul>
<li>Constructor functions are the most used way in JavaScript to construct prototype chains. The popular<br>ity of constructor functions comes from the fact that this was the only original way for constructin<br>g types initially.<br>Also many engines are highly optimized for constructor functions.</li>
<li><p>In JavaScript you can create an object like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Alien</span></span>() &#123;</span><br><span class="line">    this.age = 10;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var zippy = new Alien();</span><br></pre></td></tr></table></figure>
</li>
<li><p>When used with the keyword new functions behave like factories, meaning that they create new objects</p>
</li>
<li>The new object they create is linked to the function by its prototype, more on this later. So in Jav<br>aScript we call this <u>an instance of the function</u>.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// zippy is an instance of Alien</span><br><span class="line">console.log(zippy instanceof Alien); //=&gt; <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="exercise-10-The-‘function-prototype’"><a href="#exercise-10-The-‘function-prototype’" class="headerlink" title="exercise 10( The ‘function prototype’)"></a>exercise 10( The ‘function prototype’)</h2><p>Every function in JavaScript has a special property called prototype.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Alien</span></span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line">Alien.prototype;</span><br></pre></td></tr></table></figure></p>
<p>As confusing as it may sound, this prototype property is not the real prototype (<strong>proto</strong>) of the f<br>unction.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Alien.__proto__ === Alien.prototype; //=&gt; <span class="literal">false</span></span><br></pre></td></tr></table></figure></p>
<p>This of course generates a lot of confusion as people use the term ‘prototype’ to refer to different<br> things.<br>A good clarification is to always refer to the special prototype property of functions as ‘the funct<br>ion prototype’, never just ‘prototype’.</p>
<p>This prototype property points to the object that will be assigned as the prototype of instances cre<br>ated with that function when using new.</p>
<p>Confusing? This is easier to explain with an example:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> Alien(name) &#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// the <span class="keyword">function</span> Alien has a prototype property</span><br><span class="line">// we can add properties to this <span class="keyword">function</span> prototype</span><br><span class="line">Alien.prototype.kind = <span class="string">'alien'</span>;</span><br><span class="line"></span><br><span class="line">// when we create a new object using <span class="string">'new'</span></span><br><span class="line">var zippy = new Alien(<span class="string">'Zippy'</span>);</span><br><span class="line"></span><br><span class="line">// the __proto__ of the new object points to Alien.prototype</span><br><span class="line">zippy.__proto__ == Alien.prototype; //=&gt; <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">// <span class="keyword">in</span> the new object we have access to properties defined <span class="keyword">in</span> Alien.prototype</span><br><span class="line">zippy.kind; //=&gt; alien</span><br></pre></td></tr></table></figure></p>
<p>Here is a <a href="https://docs.google.com/drawings/d/1AKJcvxs0t3iGtqkRV8
rFAWlo7tojkOSwjfhr1NWaTb0/pub?w=889&amp;h=482" target="_blank" rel="noopener">diagram showing this relationship</a>.</p>
<p>So if you create two instances of Alien, both will get Alien.prototype as their <strong>proto</strong>. So whatev<br>er you put there will be shared by the instances.</p>
<p>That is mostly everything there is to know about the JavaScript object model. Understanding how <strong>pr<br>oto</strong> and function.prototype are related will give you countless hours of joy and satisfaction. Or m<br>aybe not.</p>
<p>看完了这个，我恍然大悟。</p>
<p><code>prototype</code>根本不是继承意义上的原型，真正的原型应该是<code>__proto__</code>,原来只有<code>function</code>具有<code>prototype</code>这个属性<br>那<code>prototype</code>这个属性有什么用呢，如果你定义了一个<code>function</code>，用这个函数去new一个对象obj之前，给这个函数的<code>prototype</code>属性加上几个子属性，例如<code>Alien.prototype.kind=&#39;alien&#39;</code>，那么obj就会获得继承属性kind(存在于<code>__proto__</code>里)，注意与直接在<code>Alien</code>函数体内直接赋值不同。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/09/planetProto/" data-id="cjoo060sb0019c7rsdkyxarqa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-javascriptMemoryManagement" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/09/javascriptMemoryManagement/" class="article-date">
  <time datetime="2017-03-09T03:52:30.000Z" itemprop="datePublished">2017-03-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/09/javascriptMemoryManagement/">Javascript Memory Management</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考资料：<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Memory_Management" target="_blank" rel="noopener">Memory Management</a><br>Q:Javascript为什么要使用垃圾收集器？<br>A:比较底层的程序设计语言，比如C，拥有自己内存管理的基本函数，类似malloc()和free().而在JavaScript中，变量的创建和销毁是由js引擎自动完成的，为了自动完成销毁不再需要的变量，所以需要实现garbage collector</p>
<p>Q:Javascript中内存变量的生命周期<br>A:分配内存给变量-&gt;使用变量（计算，存储等操作）-&gt;<strong>不再需要</strong>该变量了，销毁变量，释放内存</p>
<h3 id="Release-when-the-memory-is-not-needed-anymore"><a href="#Release-when-the-memory-is-not-needed-anymore" class="headerlink" title="Release when the memory is not needed anymore"></a>Release when the memory is not needed anymore</h3><ul>
<li>Most of memory management issues come at this phase. The hardest task here is to find when “the allocated memory is not needed any longer”. It often requires the developer to determine where in the program such piece of memory is not needed anymore and free it.</li>
<li>High-level languages embed a piece of software called “garbage collector” whose job is to track memory allocation and use in order to find when a piece of allocated memory is not needed any longer in which case, it will automatically free it. This process is an approximation since the general problem of knowing whether some piece of memory is needed is undecidable (can’t be solved by an algorithm).</li>
</ul>
<p>怎么确定哪些是不再需要的变量，是垃圾收集中最困难的部分，而且（已经被证明？）不能用一个算法来解决，基于这个结论，下文就是阐述现有的两种接近这一目标的算法</p>
<h3 id="Reference-counting-garbage-collection"><a href="#Reference-counting-garbage-collection" class="headerlink" title="Reference-counting garbage collection"></a>Reference-counting garbage collection</h3><ul>
<li>This is the most naive garbage collection algorithm. This algorithm reduces the definition of “an object is not needed anymore” to “an object has no other object referencing to it”. An object is considered garbage collectable if there is zero reference pointing at this object.</li>
</ul>
<p>最先开始使用的算法，ie6,ie7就是使用该算法，如果一个对象没有任何引用指向它，则它应该被垃圾收集器收集。</p>
<p>基本思想是：<strong>an object has no other object referencing to it</strong><br>circle问题：两个互相引用的对象会形成一个循环，即使在函数(可以看做javascript的scope)调用结束后，两者的仍然互相引用着，导致它们不会被垃圾收集器收集，导致内存泄露</p>
<h3 id="Mark-and-sweep-algorithm"><a href="#Mark-and-sweep-algorithm" class="headerlink" title="Mark-and-sweep algorithm"></a>Mark-and-sweep algorithm</h3><ul>
<li>This algorithm reduces the definition of “an object is not needed anymore” to “an object is unreachable”.</li>
<li>This algorithm assumes the knowledge of a set of objects called roots (In JavaScript, the root is the global object). Periodically, the garbage-collector will start from these roots, find all objects that are referenced from these roots, then all objects referenced from these, etc. Starting from the roots, the garbage collector will thus find all reachable objects and collect all non-reachable objects.</li>
</ul>
<p>现在比较通用的算法，是假设有一个对象集合–root（global object），如果从这个对象集出发，能够引用到的，就是reachable,否则就是unreachable，会被垃圾收集器收集。</p>
<p>基本思想是：”an object is unreachable”。<br>相比较’Reference-counting garbage collection’算法，不会arithmetic上述对象形成循环而导致的内存泄露问题，在function调用结束之后，global object无法access这两个对象，所以两个对象都变成unreachable的了，会被垃圾收集器收集</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/09/javascriptMemoryManagement/" data-id="cjoo060ry000vc7rsr4ecubqj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-learn-promise" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/08/learn-promise/" class="article-date">
  <time datetime="2017-03-08T07:28:08.000Z" itemprop="datePublished">2017-03-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/08/learn-promise/">learn-promise</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考资料：  </p>
<p><code>npm install -g promise-it-wont-hurt</code></p>
<h2 id="exercise-8"><a href="#exercise-8" class="headerlink" title="exercise 8"></a>exercise 8</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">'use strict'</span>;</span><br><span class="line"><span class="keyword">function</span> attachTitle(name) &#123;</span><br><span class="line">  <span class="built_in">return</span> <span class="string">'DR. '</span> + name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Promise.resolve(<span class="string">'MANHATTAN'</span>)</span><br><span class="line">  .<span class="keyword">then</span>(attachTitle)</span><br><span class="line">  .<span class="keyword">then</span>(console.log);//DR.MANHATTAN</span><br></pre></td></tr></table></figure>
<p><strong>Conclusion</strong>:<br><strong><em>promise handlers</em></strong> will wrap your returned values in promises allowing additional chaining</p>
<h2 id="exercise-11"><a href="#exercise-11" class="headerlink" title="exercise 11"></a>exercise 11</h2><p>这是一个使用现有Promise接口来实现Promise.all的练习，以便了解其原理。 </p>
<h3 id="MY-SOLUTION"><a href="#MY-SOLUTION" class="headerlink" title="MY SOLUTION"></a>MY SOLUTION</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> all(action1, action2) &#123;</span><br><span class="line">    var promise = new Promise(<span class="keyword">function</span>(fulfill, reject) &#123;</span><br><span class="line">        var counter = 0;</span><br><span class="line">        var str1;</span><br><span class="line">        var str2;</span><br><span class="line"></span><br><span class="line">        action1.then((result) =&gt; &#123;++counter;str1=result; &#125;);</span><br><span class="line">        action2.then((result) =&gt; &#123;++counter;str2=result; &#125;);</span><br><span class="line">        var <span class="built_in">wait</span> = () =&gt; &#123;</span><br><span class="line">            setTimeout(() =&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (counter == 2) &#123;</span><br><span class="line">                    fulfill([str1,str2]);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="built_in">wait</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, 300)</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">wait</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">return</span> promise;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">all(getPromise1(), getPromise2()).<span class="keyword">then</span>(console.log);</span><br></pre></td></tr></table></figure>
<h3 id="OFFICAL-SOLUTION"><a href="#OFFICAL-SOLUTION" class="headerlink" title="OFFICAL SOLUTION"></a>OFFICAL SOLUTION</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">──────────────────</span><br><span class="line"><span class="string">'use strict'</span>;</span><br><span class="line"></span><br><span class="line">/* global getPromise1, getPromise2</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> all(a, b) &#123;</span><br><span class="line">  <span class="built_in">return</span> new Promise(<span class="keyword">function</span> (fulf</span><br><span class="line">    var counter = 0;</span><br><span class="line">    var out = [];</span><br><span class="line"></span><br><span class="line">    a.then(<span class="keyword">function</span> (val) &#123;</span><br><span class="line">      out[0] = val;</span><br><span class="line">      counter++;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (counter &gt;= 2) &#123;</span><br><span class="line">        fulfill(out);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    b.then(<span class="keyword">function</span> (val) &#123;</span><br><span class="line">      out[1] = val;</span><br><span class="line">      counter++;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (counter &gt;= 2) &#123;</span><br><span class="line">        fulfill(out);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">all(getPromise1(), getPromise2())</span><br><span class="line">  .<span class="keyword">then</span>(console.log);</span><br></pre></td></tr></table></figure>
<p>官方答案更加优雅吧，我的答案还用上了setTimeout,当然实际使用应该会用已有的Promise.all了。</p>
<h2 id="exercise-13-do-some-work"><a href="#exercise-13-do-some-work" class="headerlink" title="exercise 13(do some work)"></a>exercise 13(do some work)</h2><h3 id="MY-SOLUTION-1"><a href="#MY-SOLUTION-1" class="headerlink" title="MY SOLUTION"></a>MY SOLUTION</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'use strict'</span>;</span><br><span class="line"></span><br><span class="line">var http=require(<span class="string">'q-io/http'</span>);</span><br><span class="line"></span><br><span class="line">http.read(&#123;url:<span class="string">'http://localhost:7000'</span>,method:<span class="string">'GET'</span>&#125;)</span><br><span class="line">.<span class="keyword">then</span>(<span class="keyword">function</span> (result) &#123;</span><br><span class="line">	<span class="built_in">return</span> result.toString();</span><br><span class="line">&#125;).catch(console.error)</span><br><span class="line">.<span class="keyword">then</span>(<span class="keyword">function</span> (userId) &#123;</span><br><span class="line">	<span class="built_in">return</span> http.read(&#123;url:<span class="string">'http://localhost:7001/'</span>+userId,method:<span class="string">'GET'</span>&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="keyword">then</span>(<span class="keyword">function</span> (result) &#123;</span><br><span class="line">	console.log(JSON.parse(result));</span><br><span class="line">&#125;).catch(console.error);</span><br></pre></td></tr></table></figure>
<h3 id="OFFICIAL-SOLUTION"><a href="#OFFICIAL-SOLUTION" class="headerlink" title="OFFICIAL SOLUTION"></a>OFFICIAL SOLUTION</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var qhttp = require(<span class="string">'q-io/http'</span>);</span><br><span class="line"></span><br><span class="line">qhttp.read(<span class="string">"http://localhost:7000/"</span>)</span><br><span class="line">.<span class="keyword">then</span>(<span class="keyword">function</span> (id) &#123;</span><br><span class="line">  <span class="built_in">return</span> qhttp.read(<span class="string">"http://localhost:7001/"</span> + id);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="keyword">then</span>(<span class="keyword">function</span> (json) &#123;</span><br><span class="line">  console.log(JSON.parse(json));</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="keyword">then</span>(null, console.error)</span><br><span class="line">.<span class="keyword">done</span>();</span><br></pre></td></tr></table></figure>
<p>大体思路上没有区别，不过我的异常处理多了一个，其实没有必要的，由于catch只能catch到被reject的promise,其他then根本不会触发，所以只需要最后一个就够了</p>
<h4 id="理由如下：（参见之前a-importan-rule那个练习）"><a href="#理由如下：（参见之前a-importan-rule那个练习）" class="headerlink" title="理由如下：（参见之前a importan rule那个练习）"></a>理由如下：（参见之前a importan rule那个练习）</h4><p>In the code below, each expression is evaluated one after the other.  If any expression throws an exception, all subsequent expressions will not be executed and the catch block will catch and handle it.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">  doStuff()</span><br><span class="line">  doMoreStuff()</span><br><span class="line">&#125; catch (err) &#123;</span><br><span class="line">  complainAboutJavascript(err);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>With promises, we can achieve a very similar control flow as shown (assume all functions return promises):</p>
<pre><code class="bash">doStuff()
.<span class="keyword">then</span>(doMoreStuff)
.<span class="keyword">then</span>(null, complainAboutJavascript);
</code></pre>
<p>Maybe we should combine the last two lines since one is a fulfill handler and the other is a rejection handler?  NO!  While this might initially seem sensible consider what would happen if doMoreStuff threw an error.  Since the promise returned from it would be rejected, it would look for the next rejection handler to handle it.</p>
<h2 id="收获"><a href="#收获" class="headerlink" title="收获"></a>收获</h2><ul>
<li>理解了Promise的用法和一些实现原理和思想</li>
<li>在这个练习中学习了一个有用的npm package:<a href="https://github.com/kriskowal/q-io#response" target="_blank" rel="noopener">q-io</a><br>与基本的fs,http等package类似，可以使用q-io/fs,q-io/http等操作，但返回的形式是Promise对象</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/08/learn-promise/" data-id="cjoo060s1000zc7rsonqlrifo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-the-event-loop-in-js" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/08/the-event-loop-in-js/" class="article-date">
  <time datetime="2017-03-08T03:38:56.000Z" itemprop="datePublished">2017-03-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/08/the-event-loop-in-js/">the event-loop in js</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考资料：<br><a href="https://vimeo.com/96425312" target="_blank" rel="noopener">《Help,I’m stuck in an event-loop》</a><br><a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html" target="_blank" rel="noopener">阮一峰：JavaScript 运行机制详解：再谈Event Loop</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/08/the-event-loop-in-js/" data-id="cjoo060sg001gc7rsrpv466dp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-heap-stack" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/08/heap-stack/" class="article-date">
  <time datetime="2017-03-08T03:35:33.000Z" itemprop="datePublished">2017-03-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/08/heap-stack/">heap &amp; stack</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考资料：<br><a href="http://gribblelab.org/cbootcamp/7_memory_stack_vs_heap.html" target="_blank" rel="noopener">Memory : Stack vs Heap</a>，来自一个C语言的入门教程<br><a href="http://blog.jobbole.com/81010/" target="_blank" rel="noopener">谈谈javascript语法里一些难点问题”</a></p>
<p>Q:栈是什么？  </p>
<blockquote>
<p>The stack is a “LIFO” (last in, first out) data structure, that is managed and optimized by the CPU quite closely.</p>
</blockquote>
<ul>
<li>栈区的生命周期：<em>A key to understanding the stack is the notion that <strong>when a function exits, all of its variables are popped off of the stack (and hence lost forever)</strong>.</em></li>
<li>栈区大小的限制：<em>Another feature of the stack to keep in mind, is that there is <strong>a limit (varies with OS) on the size of variables</strong> that can be store on the stack. This is not the case for variables allocated on the heap.</em></li>
</ul>
<p>Q:栈有什么优点？</p>
<blockquote>
<p>The advantage of using the stack to store variables, is that memory is managed for you. You don’t have to allocate memory by hand, or free it once you don’t need it any more. What’s more, because the CPU organizes stack memory so efficiently, reading from and writing to stack variables is very fast.  </p>
</blockquote>
<p>Q:栈用在什么地方？<br>在c中，那些不用我们自己分配的变量，比如int,double这些变量，都是直接使用栈区的值，而那些需要分配的值，栈区存储的值只是它堆区的引用地址，通过这个地址来获得堆区的对象。</p>
<p><img src="http://ww3.sinaimg.cn/mw690/7178f37ejw1en4hc7qgvcj20fp084jrr.jpg" alt=""><br>图片</p>
<p>Q:堆是什么？</p>
<blockquote>
<p>The heap is a region of your computer’s memory that is not managed automatically for you, and is not as tightly managed by the CPU.</p>
</blockquote>
<p>Q:堆有什么优点？</p>
<blockquote>
<p>Unlike the stack, the heap does not have size restrictions on variable size (apart from the obvious physical limitations of your computer).</p>
</blockquote>
<p>Q:堆和栈有什么区别？</p>
<h3 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h3><ul>
<li>very fast access</li>
<li>don’t have to explicitly de-allocate variables</li>
<li>space is managed efficiently by CPU, memory will not become fragmented</li>
<li>local variables only</li>
<li>limit on stack size (OS-dependent)</li>
<li>variables cannot be resized<h3 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h3></li>
<li>variables can be accessed globally</li>
<li>no limit on memory size</li>
<li>(relatively) slower access</li>
<li>no guaranteed efficient use of space, memory may become fragmented over time as blocks of - memory are allocated, then freed</li>
<li>you must manage memory (you’re in charge of allocating and freeing variables)</li>
<li>variables can be resized using realloc()</li>
</ul>
<h2 id="继续深入"><a href="#继续深入" class="headerlink" title="继续深入"></a>继续深入</h2><p>待填坑…</p>
<p><a href="http://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap" target="_blank" rel="noopener">What and where are the stack and heap?</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Memory_Management" target="_blank" rel="noopener">Mozilla Foundation:《Javascript Memory Management》</a>  </p>
<p>关于JavaScript的内存管理请参见另一篇博文<a href="https://shengnoyi.github.io/2017/03/09/javascriptMemoryManagement/" target="_blank" rel="noopener">Javascript Memory Management</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/08/heap-stack/" data-id="cjoo060ru000nc7rsb3muusbz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据结构/">数据结构</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-windowsCmd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/07/windowsCmd/" class="article-date">
  <time datetime="2017-03-07T03:11:02.000Z" itemprop="datePublished">2017-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/07/windowsCmd/">windowsCmd</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Windows命令"><a href="#Windows命令" class="headerlink" title="Windows命令"></a>Windows命令</h2><p>shutdown：<code>shutdown -s</code> </p>
<p>sleep :<code>rundll32 powrprof.dll,SetSuspendState 0,1,0</code></p>
<p>越来越不想碰鼠标了QAQ</p>
<p>create a empty file:<code>copy NUL empty.js</code></p>
<p>create a file with some text:<code>echo str&gt;file.txt</code></p>
<p>rename a file:<code>rename file1 file2</code></p>
<p>delete a file:<code>del file</code></p>
<p>delete a folder:<code>rd folder</code></p>
<p>clear screen:<code>cls</code></p>
<p>open the current path’s folder with window: <code>start .</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/07/windowsCmd/" data-id="cjoo060sm001oc7rs5jeecaaw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Windows/">Windows</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-scope-chains-closures" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/07/scope-chains-closures/" class="article-date">
  <time datetime="2017-03-07T01:59:50.000Z" itemprop="datePublished">2017-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/07/scope-chains-closures/">scope-chains-closures</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>The javascript runtime follows these steps to <strong>assign a variable</strong>:</p>
<p> 1) Search within the current scope.<br> 2) If not found, search in the immediately outer scope.<br> 3) If found, go to 6.<br> 4) If not found, repeat 2. Until the Global Scope is reached.<br> 5) If not found in Global Scope, create it (on window / global objects).<br> 6) Assign the value.  </p>
<h3 id="Garbage-Collection-Mark-amp-Sweep"><a href="#Garbage-Collection-Mark-amp-Sweep" class="headerlink" title="Garbage Collection:Mark &amp; Sweep"></a>Garbage Collection:<em>Mark &amp; Sweep</em></h3><p>Memory in Javascript is managed automatically by the runtime. The runtime<br>decides when/if to release any allocated memory. This decision process is called<br>Garbage Collection.</p>
<p>Every javascript runtime has their own algorithm for garbage collection, but<br>most use a variation of Mark &amp; Sweep. The Mark &amp; Sweep algorithm works by<br>marking references to memory (variables, functions, etc) which are still<br>reachable from active code. Any reference which is not marked, is swept into<br>the garbage (i.e. the memory is freed).</p>
<p>This concept of marking reachable memory is particulary relevant to closures:</p>
<pre><code> someFunc()
  var bar
return inner
     ↑
     |
  inner()
 alert(bar)
     ↑
     ⋮
</code></pre><p><strong>When the closure inner() is returned from someFunc(), it maintains its<br>reference to bar. The Mark &amp; Sweep algorithm will mark bar as reachable, and<br>hence will not garbage collect it.</strong></p>
<p><strong>For inner() to correctly resolve its reference to bar, not only does the<br>memory for bar need to be kept, but the scope chain which describes how to<br>reach bar must also be kept.</strong></p>
<p>Once the reference to inner() is no longer required, it can be marked for<br>garbage collection, which in turn means bar can also be marked, and finally<br>the entire scope chain can be marked, resulting in the freeing of all the<br>memory.</p>
<p>In this way, Scope, Scope Chains, Closures, and Garbage Collection are all<br>closely related.</p>
<h3 id="ps-非常有意思的是最后一个练习是使用Chrome浏览器查看垃圾收集的状况，使用dev-tool-gt-record-js-Heap（蓝色那条线）-gt-垃圾收集通常在高度变化的地方是比较频繁的"><a href="#ps-非常有意思的是最后一个练习是使用Chrome浏览器查看垃圾收集的状况，使用dev-tool-gt-record-js-Heap（蓝色那条线）-gt-垃圾收集通常在高度变化的地方是比较频繁的" class="headerlink" title="ps:非常有意思的是最后一个练习是使用Chrome浏览器查看垃圾收集的状况，使用dev tool-&gt;record js Heap（蓝色那条线）-&gt;垃圾收集通常在高度变化的地方是比较频繁的"></a>ps:非常有意思的是最后一个练习是使用Chrome浏览器查看垃圾收集的状况，使用dev tool-&gt;record js Heap（蓝色那条线）-&gt;垃圾收集通常在高度变化的地方是比较频繁的</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/07/scope-chains-closures/" data-id="cjoo060sf001fc7rsnnuznmya" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-SHA1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/02/SHA1/" class="article-date">
  <time datetime="2017-03-02T10:11:19.000Z" itemprop="datePublished">2017-03-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/SHA1/">SHA1算法的猜想</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="SHA1算法的猜想"><a href="#SHA1算法的猜想" class="headerlink" title="SHA1算法的猜想"></a>SHA1算法的猜想</h2><p>参考资料：<a href="https://www.zhihu.com/question/56234281" target="_blank" rel="noopener">如何评价 2 月 23 日谷歌宣布实现了 SHA-1 碰撞？</a><br>原本一直以为是使用SHA1算法对密码进行加密，这样hacker即使获得了密文，也没有办法进行破解，但在看了这个文章后发现我是错的</p>
<h3 id="SHA1的正确用法猜想"><a href="#SHA1的正确用法猜想" class="headerlink" title="SHA1的正确用法猜想"></a>SHA1的正确用法猜想</h3><p>以用户的注册和登录为例，在注册的时候，客户端发送明文密码，服务器使用SHA1算法生成一个数据摘要b，并存储在数据库中。当需要登录的时候，客户端发送一个密码过来，服务器再次调用SHA1密码，生成另一个数据摘要b1,比对b1和b是否一致，如果一致则说明密码是正确的。</p>
<h3 id="在服务端加密"><a href="#在服务端加密" class="headerlink" title="在服务端加密"></a>在服务端加密</h3><p>如果服务器被人攻击了，密码数据丢失，但是由于存储的只是摘要，而通过摘要是没有办法（在SHA1没有被破解之前）反向得到原文的，那么hacker仍没有办法获取用户的其他数据，</p>
<h3 id="在客户端加密"><a href="#在客户端加密" class="headerlink" title="在客户端加密"></a>在客户端加密</h3><p>如果是在客户端进行加密，加密后把密文发到服务器直接比对是否一致，这样如果服务器被攻陷了，那么密码也被丢失了，跟明文存储没有区别了，这样使用SHA1算法就没有意义了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/02/SHA1/" data-id="cjoo060r20000c7rsuoxdtpu7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络基础/">网络基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-my-core" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/20/my-core/" class="article-date">
  <time datetime="2017-02-20T15:29:49.000Z" itemprop="datePublished">2017-02-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/20/my-core/">my core</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q &amp; A"></a>Q &amp; A</h3><p>Q:vue-router用的是哪种模式？histroy or hash?</p>
<p>Q:js基础不太好？JavaScript权威指南，JavaScript高级程序设计</p>
<p>Q:适配方案？如何适配全分辨率？</p>
<p>Q:event bus</p>
<p>Q:bubble?</p>
<h3 id="Requirement"><a href="#Requirement" class="headerlink" title="Requirement"></a>Requirement</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/02/20/my-core/" data-id="cjoo060s90017c7rsfdhanepv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端开发/">前端开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小程序/">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络基础/">网络基础</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Javascript/" style="font-size: 20px;">Javascript</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/前端开发/" style="font-size: 16.67px;">前端开发</a> <a href="/tags/小程序/" style="font-size: 13.33px;">小程序</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/网络基础/" style="font-size: 13.33px;">网络基础</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/16/get-started-learning-typescript/">get-started-learning-typescript</a>
          </li>
        
          <li>
            <a href="/2018/07/04/install-global-package-failed-with-yarn-in-ubuntu/">解决在 Ubuntu 下使用 yarn 安装全局依赖不成功的问题</a>
          </li>
        
          <li>
            <a href="/2017/11/11/beijiang/">course</a>
          </li>
        
          <li>
            <a href="/2017/10/17/canvas-article/">canvas-article</a>
          </li>
        
          <li>
            <a href="/2017/09/15/frontend-testing/">Frontend Testing</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Volibear.V<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>